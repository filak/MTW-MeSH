{% set formId = random_id() %}

<div class="modal fade" id="modify-user-modal" data-formid="{{ formId }}" tabindex="-1" role="dialog" aria-labelledby="myModalUpdateUser" aria-hidden="true"
     data-curuser="{{ session.uname }}">
  <div class="modal-dialog">
    <div class="modal-content">
    <form action="{{ url_for('update_user') }}" method="post" id="update-user-{{ formId }}-form" data-formid="{{ formId }}" autocomplete="off">

      <div class="modal-header">

        <div class="col">
          <h4 class="modal-title" id="myModalUpdateUser">Update user</h4>
          <h4 class="mt-2">
            <span class="font-weight-bold" id="updatedUserName"></span>
          </h4>
        </div>

        <div class="col">
          <div class="form-group mb-0">
            <label for="ugroup-{{ formId }}" class="text-info">Role</label>
              <select class="form-control" id="ugroup-{{ formId }}" name="ugroup" required autocomplete="off">
                <option value="editor">Editor</option>
                <option value="contributor">Contributor</option>
                <option value="manager">Manager</option>
                <option value="viewer">Viewer</option>
                <option value="disabled">Disabled</option>
              </select>
          </div>
        </div>

      </div>
      <div class="modal-body">

          <div class="form-group">
            <label for="firstname-{{ formId }}" class="text-info">Firstname</label>
            <input type="text" class="form-control" id="firstname-{{ formId }}" name="firstname" required>
          </div>

          <div class="form-group">
            <label for="lastname-{{ formId }}" class="text-info">Lastname</label>
            <input type="text" class="form-control" id="lastname-{{ formId }}" name="lastname" required>
          </div>

          <div class="form-row">
            <div class="form-group col">
              <label for="email-{{ formId }}">Email</label>
              <input type="text" class="form-control" id="email-{{ formId }}" name="email" type="email" autocomplete="off">
            </div>

            <div class="form-group col">
              <label for="phone-{{ formId }}">Phone</label>
              <input type="text" class="form-control" id="phone-{{ formId }}" name="phone" autocomplete="off">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col">
              <label for="uname-{{ formId }}" class="text-info">Username</label>
              <input type="text" class="form-control" id="uname-{{ formId }}" name="uname" required autocomplete="off">
            </div>

            <div class="form-group col">
              <label for="pswdnew-{{ formId }}">Reset Password</label>
              <input type="text" class="form-control" id="pswdnew-{{ formId }}" name="pswdnew" value="" placeholder="...new password..." autocomplete="off">
              <small class="form-text font-weight-bold text-warning">Do not forget to keep it !</small>
            </div>
          </div>

          <p class="mb-0 text-muted" id="userLastUpdate">updated</p>


          <input type="hidden" class="form-control" id="userid-{{ formId }}" name="userid">

          <input type="hidden" id="update-user-{{ formId }}-action"
                 name="action"
                 value="update">

      </div>
      <div class="modal-footer">

        {% if session.ugroup in ['admin','manager'] %}
        <button type="button" class="btn btn-outline-warning mr-auto" id="deleteUserButton"
                data-dismiss="modal" data-toggle="modal" data-target="#deleteUser" title=""
                data-form="#update-user-{{ formId }}">Delete User</button>
        {% endif %}

        <button type="button" class="btn btn-link ml-3" data-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-success ml-3">Update</button>
      </div>

      <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">

    </form>
    </div>
  </div>
</div>
